<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>
      Solicitar cotización
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Solicitar cotización</ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-card *ngIf="product">
    <ion-card-header>
      <ion-card-title>{{product.name}}</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-item-group>
          <ion-item-divider>
            <ion-label>Datos del producto</ion-label>
          </ion-item-divider>

          <ion-item>
            <ion-thumbnail slot="start">
              <img alt="Silhouette of mountains" [src]="product.provider.logo" />
            </ion-thumbnail>
            <ion-label>Proveedor: {{product.provider.name}}</ion-label>
          </ion-item>
    
          <ion-item>
            <ion-icon slot="start" name="pricetag-outline"></ion-icon>
            <ion-label>Categoria: {{product.category.name}}</ion-label>
          </ion-item>
    
          <ion-item>
            <ion-icon slot="start" name="cash-outline"></ion-icon>
            <ion-label>Rango de precio: Q {{product.price}}</ion-label>
          </ion-item>

          <ion-item-divider>
            <ion-label>Datos de cliente</ion-label>
          </ion-item-divider>

          <ng-container [ngSwitch]="formType">

            <div *ngSwitchCase="'client'">
              <form [formGroup]="clientForm">
                <ion-item>
                  <ion-icon slot="start" name="person-outline"></ion-icon>
                  <ion-input formControlName="name" label="Nombre(s)" placeholder="Ejemplo Prueba"></ion-input>
                </ion-item>
      
                <ion-item>
                  <ion-icon slot="start" name="person-outline"></ion-icon>
                  <ion-input formControlName="surname" label="Apellido(s)" placeholder="Buenejemplo Garcia"></ion-input>
                </ion-item>
      
                <ion-item>
                  <ion-icon slot="start" name="calendar-outline"></ion-icon>
                  <ion-label>Fecha de nacimiento</ion-label>
                  <ion-datetime formControlName="bornDate" label="Fecha de nacimiento" presentation="day-month-year" locale="es-ES"></ion-datetime>
                </ion-item>

                <ion-item>
                  <ion-icon slot="start" name="happy-outline"></ion-icon>
                  <ion-textarea formControlName="comments" label="Comentarios adicionales" placeholder="Ej: me urge la cotización"></ion-textarea>
                </ion-item>

                <ion-button fill="outline" [disabled]="!clientForm.valid" expand="full" (click)="sendClientQuotation()">
                  <ion-icon slot="start" name="send"></ion-icon>
                  Enviar solicitud
                </ion-button>
              </form>
            </div>

            <div *ngSwitchCase="'house'">
              <form [formGroup]="houseForm">
                <ion-item>
                  <ion-icon slot="start" name="person-outline"></ion-icon>
                  <ion-input formControlName="name" label="Nombre(s)" placeholder="Ejemplo Prueba"></ion-input>
                </ion-item>
      
                <ion-item>
                  <ion-icon slot="start" name="person-outline"></ion-icon>
                  <ion-input formControlName="surname" label="Apellido(s)" placeholder="Buenejemplo Garcia"></ion-input>
                </ion-item>
      
                <ion-item>
                  <ion-icon slot="start" name="home-outline"></ion-icon>
                  <ion-textarea formControlName="address" label="Direccion casa" placeholder="Ej: Calle 123"></ion-textarea>
                </ion-item>
    
                <ion-item>
                  <ion-icon slot="start" name="cash-outline"></ion-icon>
                  <ion-input formControlName="price" type="number" label="Valor de la casa" placeholder="Ej: Q 1,200,000.00"></ion-input>
                </ion-item>

                <ion-item>
                  <ion-icon slot="start" name="happy-outline"></ion-icon>
                  <ion-textarea formControlName="comments" label="Comentarios adicionales" placeholder="Ej: la casa es nueva"></ion-textarea>
                </ion-item>

                <ion-button fill="outline" [disabled]="!houseForm.valid" expand="full" (click)="sendHouseQuotation()">
                  <ion-icon slot="start" name="send"></ion-icon>
                  Enviar solicitud
                </ion-button>
              </form>
            </div>

            <div *ngSwitchCase="'car'">
              <form [formGroup]="carForm">
                <ion-item>
                  <ion-icon slot="start" name="person-outline"></ion-icon>
                  <ion-input formControlName="name" label="Nombre(s)" placeholder="Ejemplo Prueba"></ion-input>
                </ion-item>
      
                <ion-item>
                  <ion-icon slot="start" name="person-outline"></ion-icon>
                  <ion-input formControlName="surname" label="Apellido(s)" placeholder="Buenejemplo Garcia"></ion-input>
                </ion-item>
    
                <ion-item>
                  <ion-icon slot="start" name="car-outline"></ion-icon>
                  <ion-input formControlName="brand" type="text" label="Marca de carro" placeholder="Ej: Toyota"></ion-input>
                </ion-item>
    
                <ion-item>
                  <ion-icon slot="start" name="car-outline"></ion-icon>
                  <ion-input formControlName="model" type="text" label="Modelo de carro" placeholder="Ej: Corolla"></ion-input>
                </ion-item>
    
                <ion-item>
                  <ion-icon slot="start" name="car-outline"></ion-icon>
                  <ion-input formControlName="year" type="number" label="Año de fabricación de carro" placeholder="Ej: 2010"></ion-input>
                </ion-item>
    
                <ion-item>
                  <ion-icon slot="start" name="car-sport-outline"></ion-icon>
                  <ion-input formControlName="plate" type="text" label="Placa del carro" placeholder="Ej: P-123ABC"></ion-input>
                </ion-item>
    
                <ion-item>
                  <ion-icon slot="start" name="cash-outline"></ion-icon>
                  <ion-input formControlName="price" type="number" label="Valor estimado del carro" placeholder="Ej: Q 45,000.00"></ion-input>
                </ion-item>
    
                <ion-item>
                  <ion-icon slot="start" name="happy-outline"></ion-icon>
                  <ion-textarea formControlName="comments" label="Comentarios adicionales" placeholder="Ej: el carro es nuevo"></ion-textarea>
                </ion-item>
                <br/>
                <ion-text color="danger">Nota: las polizas de autos deben ser aprobadas con una inspeccion al mismo (presencial)</ion-text>
                <br/>
                <ion-button fill="outline" [disabled]="!carForm.valid" expand="full" (click)="sendCarQuotation()">
                  <ion-icon slot="start" name="send"></ion-icon>
                  Enviar solicitud
                </ion-button>
              </form>
            </div>

            <div *ngSwitchDefault>
              <p>Seleccione una opción válida para mostrar un formulario.</p>
            </div>
          </ng-container>

          

          

          

        </ion-item-group>
      </ion-list>
    </ion-card-content>
  </ion-card>

</ion-content>
